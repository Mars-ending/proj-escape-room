<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Selene: Technical Overview</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://unpkg.com/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>

    <style>
        /* === CSS Stylesheet === */
        
        /* Global Reset & No Scroll */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Critical: Prevents scrolling */
            background-color: #050505;
            font-family: 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            color: #e0e0e0;
            letter-spacing: 0.5px;
        }

        /* Layer 1: 3D Canvas (Background) */
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Layer 2: UI Overlay (Foreground) */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none; /* Allows interaction with 3D scene */
            
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Glassmorphism Card Style */
        .slide-content {
            position: absolute;
            width: 60%;
            max-width: 850px;
            padding: 60px;
            
            /* Frosted Glass Effect */
            background: rgba(15, 23, 35, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid #00d2ff; /* Accent border */
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            
            /* Transition States */
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
            
            pointer-events: auto;
            text-align: left;
        }

        .slide-content.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            z-index: 10;
        }

        /* Typography */
        h1 { margin: 0 0 10px 0; font-size: 3.2em; color: #fff; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; }
        h2 { margin: 0 0 25px 0; font-size: 1.8em; color: #00d2ff; font-weight: 400; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }
        
        p { font-size: 1.1em; line-height: 1.6; color: #ccc; margin-bottom: 15px; }
        
        ul { margin-top: 15px; padding-left: 18px; color: #bbb; font-size: 1.05em; line-height: 1.8; }
        li { margin-bottom: 8px; }

        /* Highlight Utilities */
        .highlight { color: #00d2ff; font-weight: 600; }
        .highlight-warn { color: #ff9f43; font-weight: 600; }
        .text-small { font-size: 0.9em; color: #888; }
        
        /* Code Block Style */
        .tech-spec {
            background: rgba(0,0,0,0.3);
            border-left: 2px solid #555;
            padding: 15px;
            font-family: 'Consolas', monospace;
            font-size: 0.9em;
            color: #dcdcdc;
            margin-top: 15px;
        }

        /* Navigation Arrows */
        .nav-area {
            position: absolute; top: 0; height: 100%; width: 10%; z-index: 20;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: background 0.3s; pointer-events: auto;
        }
        .prev-area { left: 0; }
        .next-area { right: 0; }
        .nav-area:hover { background: rgba(255, 255, 255, 0.02); }
        
        .arrow { font-size: 3em; color: rgba(255,255,255,0.2); user-select: none; transition: 0.3s; }
        .nav-area:hover .arrow { color: #00d2ff; transform: scale(1.1); }

    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="ui-layer">
        
        <div class="slide-content active" id="slide-0">
            <h1>Project of MRTK</h1>
            <h2 style="border: none; color: #e0e0e0; font-size: 1.5em;">Lunar Reconstruction: <br>A VR Simulation for Extraterrestrial Resource Management</h2>
            <div style="margin-top: 50px;" class="text-small">
                <p><strong>Presented by:</strong> [WEI]</p>
                <p><strong>Date:</strong> February 2026</p>
                <p><strong>Platform:</strong> Unity / Mixed Reality Toolkit (MRTK)</p>
            </div>
        </div>

        <div class="slide-content" id="slide-1">
            <h2>01. Context & Objective</h2>
            
            <p><span class="highlight-warn">The Event:</span> The 2150 Lunar Core Fragmentation.</p>
            <p>Following a catastrophic meteor impact, the Moon's gravitational stability has been compromised, leading to chaotic tidal forces on Earth.</p>

            <p><span class="highlight">The Solution:</span> Deployment of the <b>"Ark Station"</b> utilizing Phase Wormhole technology.</p>
            <ul>
                <li><strong>Primary Objective:</strong> Traverse the solar system to harvest planetary resources.</li>
                <li><strong>Ultimate Goal:</strong> Synthesize materials to reconstruct the lunar core and restore orbital equilibrium.</li>
            </ul>
        </div>

        <div class="slide-content" id="slide-2">
            <h2>02. Operational Workflow</h2>
            <p>The system simulates a closed-loop resource management cycle:</p>
            
            <ul style="list-style-type: decimal;">
                <li><span class="highlight">Resource Acquisition:</span> Retrieval of raw materials (e.g., Inert Batteries, Carbon) via Earth-based logistics.</li>
                <li><span class="highlight">Non-Linear Transit:</span> Instantaneous deployment to planetary orbits via Wormhole gates.</li>
                <li><span class="highlight">Environmental Processing:</span> Utilizing planetary conditions (gravity, radiation, atmosphere) for material synthesis.</li>
                <li><span class="highlight">Reconstruction:</span> Storing refined products via chest-mounted units for lunar repair.</li>
            </ul>
        </div>

        <div class="slide-content" id="slide-3">
            <h2>03. Planetary Processing Logic</h2>
            <p>Resource synthesis utilizes distinct astrophysical properties of each celestial body:</p>

            <div style="display: flex; gap: 30px;">
                <div style="flex: 1;">
                    <p class="highlight">Energy & Chemical Synthesis</p>
                    <ul>
                        <li><b>Mercury:</b> Solar Radiation Harvesting <br>&#8594; <i class="text-small">High-Capacity Batteries</i></li>
                        <li><b>Venus:</b> Atmospheric Extraction <br>&#8594; <i class="text-small">Acidic Compounds</i></li>
                        <li><b>Jupiter:</b> Gas Giant Siphoning <br>&#8594; <i class="text-small">Hydrogen Fuel Cells</i></li>
                    </ul>
                </div>
                <div style="flex: 1;">
                    <p class="highlight">Physical Transformation</p>
                    <ul>
                        <li><b>Saturn:</b> Cryogenic Treatment (Ring System) <br>&#8594; <i class="text-small">Thermal Sinks / Ice Cores</i></li>
                        <li><b>Mars:</b> Ferrous Material Refining <br>&#8594; <i class="text-small">Battery Casings</i></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="slide-content" id="slide-4">
            <h2>04. HCI Framework (VR Implementation)</h2>
            <p>The project leverages MRTK to establish an immersive interaction paradigm:</p>

            <ul>
                <li>
                    <strong>Kinematic Manipulation:</strong> 
                    Physics-based grabbing mechanics utilizing <code>Rigidbody</code> simulation for realistic ballistic trajectories.
                </li>
                <li>
                    <strong>Proprioceptive Inventory:</strong> 
                    A "Chest Collector" system utilizing body-relative colliders for eyes-free object storage.
                </li>
                <li>
                    <strong>Diegetic Interface:</strong> 
                    Hand-constraint holographic menus for object instantiation, reducing cognitive load.
                </li>
            </ul>
        </div>

        <div class="slide-content" id="slide-5">
            <h2>05. Technical Architecture</h2>
            <p><strong>Engine:</strong> Unity 2022 LTS + Universal Render Pipeline (URP)</p>

            <div class="tech-spec">
                <p><strong>Core Systems:</strong></p>
                <ul>
                    <li><code>GameManager</code>: Singleton pattern for global state control.</li>
                    <li><code>PlanetProcessor</code>: Modular logic defining I/O parameters for celestial bodies.</li>
                    <li><code>InventorySystem</code>: Dictionary-based data structure for O(1) item lookup and state management.</li>
                </ul>
            </div>

            <p class="text-small" style="margin-top: 15px;">
                <em>Optimization Note:</em> Dynamic switching of <code>IsKinematic</code> states prevents physics jitter (Soap Effect) during hand-object interaction.
            </p>
        </div>

        <div class="slide-content" id="slide-6">
            <h2>06. Future Work & Scalability</h2>
            <ul>
                <li><strong>Temporal Mechanics:</strong> Introduction of Pluto for time-dilation based processing.</li>
                <li><strong>Modular Assembly:</strong> Implementation of a workbench system to combine refined components into complex artifacts (e.g., Gravity Stabilizers).</li>
                <li><strong>Visual Fidelity:</strong> Integration of VFX Graph for dynamic weather systems (e.g., Jupiter's storms).</li>
                <li><strong>Platform Porting:</strong> Optimization for standalone HMDs (Meta Quest) via OpenXR.</li>
            </ul>
        </div>

        <div class="slide-content" id="slide-7" style="text-align: center;">
            <h1>Conclusion</h1>
            <p style="font-size: 1.3em; margin: 30px 0;">Project Selene demonstrates the viability of VR for complex resource management simulations.</p>
            <h2 style="border: none; margin-top: 40px; font-size: 1.5em;">Q & A</h2>
            <p class="text-small">Thank you for listening.</p>
        </div>

    </div>

    <div class="nav-area prev-area" onclick="changeSlide(-1)"><span class="arrow">❮</span></div>
    <div class="nav-area next-area" onclick="changeSlide(1)"><span class="arrow">❯</span></div>

    <script>
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();

        // Camera Setup
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 10000);
        camera.position.set(0, 900, 0); 
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.2;
        container.appendChild(renderer.domElement);

        // Post-processing
        const renderScene = new THREE.RenderPass(scene, camera);
        const bloomPass = new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        const composer = new THREE.EffectComposer(renderer);
        composer.addPass(renderScene);
        composer.addPass(bloomPass);

        const ambientLight = new THREE.AmbientLight(0xffffff, 3.5); 
        scene.add(ambientLight);

        const tl = new THREE.TextureLoader();

        // Sun
        const sunGeo = new THREE.SphereGeometry(20, 64, 64); 
        const sunMat = new THREE.MeshBasicMaterial({ 
            map: tl.load('texture/sun.jpg', undefined, undefined, (err) => {}), 
            color: 0xffffff 
        }); 
        const sun = new THREE.Mesh(sunGeo, sunMat);
        scene.add(sun);

        const glowGeo = new THREE.SphereGeometry(25, 64, 64);
        const glowMat = new THREE.MeshBasicMaterial({
            color: 0xff4400, transparent: true, opacity: 0.45, side: THREE.BackSide
        });
        const sunGlow = new THREE.Mesh(glowGeo, glowMat);
        scene.add(sunGlow);

        // Planets Data
        const planets = [];
        const planetData = [
            { name: "Mercury", size: 3.0,  distance: 45,  speed: 0.02,  color: 0xaaaaaa, tint: 0x888888, texture: 'texture/mercury.jpg' },
            { name: "Venus",   size: 4.5,  distance: 70,  speed: 0.015, color: 0xeecb8b, tint: 0x888888, texture: 'texture/venus.jpg' },
            { name: "Earth",   size: 4.8,  distance: 100, speed: 0.01,  color: 0x2233ff, tint: 0x999999, texture: 'texture/earth.jpg' },
            { name: "Mars",    size: 4.0,  distance: 130, speed: 0.008, color: 0xff4500, tint: 0x999999, texture: 'texture/mars.jpg' },
            { name: "Jupiter", size: 12.0, distance: 200, speed: 0.004, color: 0xd2b48c, tint: 0x666666, texture: 'texture/jupiter.jpg' }, 
            { name: "Saturn",  size: 10.0, distance: 280, speed: 0.003, color: 0xf4a460, tint: 0x666666, texture: 'texture/saturn.jpg', hasRing: true },
            { name: "Uranus",  size: 7.0,  distance: 360, speed: 0.002, color: 0x7fffd4, tint: 0x888888, texture: 'texture/uranus.jpg' },
            { name: "Neptune", size: 6.8,  distance: 420, speed: 0.001, color: 0x4169e1, tint: 0x888888, texture: 'texture/neptune.jpg' }
        ];

        planetData.forEach(data => {
            const geo = new THREE.SphereGeometry(data.size, 64, 64);
            const mat = new THREE.MeshBasicMaterial({ 
                map: tl.load(data.texture, undefined, undefined, (err) => {}), 
                color: data.tint 
            });
            const mesh = new THREE.Mesh(geo, mat);
            
            const startAngle = Math.random() * Math.PI * 2;
            mesh.userData = { distance: data.distance, angle: startAngle, speed: data.speed };
            mesh.position.x = Math.cos(startAngle) * data.distance;
            mesh.position.z = Math.sin(startAngle) * data.distance;

            if (data.hasRing) {
                const ringGeo = new THREE.RingGeometry(data.size * 1.4, data.size * 2.3, 64);
                var pos = ringGeo.attributes.position;
                var v3 = new THREE.Vector3();
                for (let i = 0; i < pos.count; i++){ v3.fromBufferAttribute(pos, i); ringGeo.attributes.uv.setXY(i, v3.length() < (data.size*1.8) ? 0 : 1, 1); }
                const ringMat = new THREE.MeshBasicMaterial({ 
                    map: tl.load('texture/saturn_ring.png', undefined, undefined, (err)=>{}), 
                    color: 0x666666, side: THREE.DoubleSide, transparent: true, opacity: 0.7 
                });
                const ring = new THREE.Mesh(ringGeo, ringMat);
                ring.rotation.x = Math.PI / 2;
                mesh.add(ring);
            }

            const orbitGeo = new THREE.RingGeometry(data.distance - 0.2, data.distance + 0.2, 128);
            const orbitMat = new THREE.MeshBasicMaterial({ color: 0x88ccff, side: THREE.DoubleSide, transparent: true, opacity: 0.1 });
            const orbit = new THREE.Mesh(orbitGeo, orbitMat);
            orbit.rotation.x = Math.PI / 2;
            scene.add(orbit);
            scene.add(mesh);
            planets.push(mesh);
        });

        const starGeo = new THREE.SphereGeometry(3000, 64, 64);
        const starMat = new THREE.MeshBasicMaterial({ 
            map: tl.load('texture/stars.jpg', undefined, undefined, (err)=>{}), 
            side: THREE.BackSide, color: 0x333333 
        });
        const stars = new THREE.Mesh(starGeo, starMat);
        scene.add(stars);

        // === Camera Slides Configuration ===
        const slides = [
            { id: 0, type: 'absolute', camPos: { x: 0, y: 700, z: 900 }, lookAt: { x: 0, y: 0, z: 0 }, pauseOrbit: false },
            { id: 1, type: 'relative', targetPlanetIndex: 2, offset: { x: 25, y: 10, z: 25 }, pauseOrbit: true }, // Earth
            { id: 2, type: 'relative', targetPlanetIndex: 3, offset: { x: 20, y: 10, z: 20 }, pauseOrbit: true }, // Mars
            { id: 3, type: 'relative', targetPlanetIndex: 4, offset: { x: 50, y: 30, z: 50 }, pauseOrbit: true }, // Jupiter
            { id: 4, type: 'relative', targetPlanetIndex: 5, offset: { x: 50, y: 40, z: 50 }, pauseOrbit: true }, // Saturn
            { id: 5, type: 'relative', targetPlanetIndex: 6, offset: { x: 30, y: 15, z: 30 }, pauseOrbit: true }, // Uranus
            { id: 6, type: 'relative', targetPlanetIndex: 7, offset: { x: 30, y: 15, z: 30 }, pauseOrbit: true }, // Neptune
            { id: 7, type: 'absolute', camPos: { x: 0, y: 200, z: 300 }, lookAt: { x: 0, y: 0, z: 0 }, pauseOrbit: false }
        ];

        let currentSlide = 0;
        let isOrbitPaused = false;
        let isAnimating = false;
        const currentLookAt = new THREE.Vector3(0, 0, 0); 

        function changeSlide(dir) {
            if (isAnimating) return;
            const next = currentSlide + dir;
            if (next >= 0 && next < slides.length) {
                isAnimating = true;

                document.getElementById(`slide-${currentSlide}`).classList.remove('active');
                currentSlide = next;
                document.getElementById(`slide-${currentSlide}`).classList.add('active');

                const target = slides[currentSlide];
                isOrbitPaused = target.pauseOrbit;

                let targetPos = { x: 0, y: 0, z: 0 };
                let targetLook = { x: 0, y: 0, z: 0 };

                if (target.type === 'relative') {
                    const p = planets[target.targetPlanetIndex];
                    targetLook = { x: p.position.x, y: p.position.y, z: p.position.z };
                    targetPos = {
                        x: p.position.x + target.offset.x,
                        y: p.position.y + target.offset.y,
                        z: p.position.z + target.offset.z
                    };
                } else {
                    targetPos = target.camPos;
                    targetLook = target.lookAt;
                }

                gsap.to(camera.position, { 
                    x: targetPos.x, y: targetPos.y, z: targetPos.z, 
                    duration: 2.0, ease: "power2.inOut" 
                });

                gsap.to(currentLookAt, { 
                    x: targetLook.x, y: targetLook.y, z: targetLook.z, 
                    duration: 2.0, ease: "power2.inOut",
                    onUpdate: () => { camera.lookAt(currentLookAt); },
                    onComplete: () => { isAnimating = false; }
                });
            }
        }
        window.changeSlide = changeSlide;

        window.addEventListener('wheel', (e) => {
            if(!isAnimating && Math.abs(e.deltaY) > 20) changeSlide(e.deltaY > 0 ? 1 : -1);
        });
        window.addEventListener('keydown', (e) => {
            if (['ArrowRight', 'ArrowDown', ' ', 'Enter'].includes(e.key)) changeSlide(1);
            else if (['ArrowLeft', 'ArrowUp'].includes(e.key)) changeSlide(-1);
        });
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

        function animate() {
            requestAnimationFrame(animate);
            planets.forEach(p => {
                if (!isOrbitPaused) {
                    p.userData.angle += p.userData.speed * 0.5;
                    p.position.x = Math.cos(p.userData.angle) * p.userData.distance;
                    p.position.z = Math.sin(p.userData.angle) * p.userData.distance;
                }
                p.rotation.y += 0.005;
            });
            sun.rotation.y += 0.002;
            camera.lookAt(currentLookAt);
            composer.render();
        }
        animate();
    </script>
</body>
</html>